<div class="space-y-7">
  <div>
    <h2 class="title-lg">Ajustes</h2>
    <p class="text-xs text-gray-500 mt-1">Preferencias de visualización y mantenimiento.</p>
  </div>

  <!-- Sección Moneda -->
  <section class="card space-y-3">
    <div class="flex items-start justify-between">
      <div>
        <h3 class="text-sm font-semibold text-gray-700 tracking-wide">Moneda</h3>
        <p class="text-[11px] text-gray-500 mt-0.5">Selecciona el símbolo que se mostrará en los montos.</p>
      </div>
    </div>
    <div>
      <label for="currency" class="sr-only">Símbolo de Moneda</label>
      <select id="currency" [(ngModel)]="currencySymbol" class="w-full bg-white/70 backdrop-blur-sm border border-gray-300 rounded-xl py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        <option *ngFor="let currency of currencies" [value]="currency.symbol">
          {{ currency.name }} ({{ currency.symbol }})
        </option>
      </select>
    </div>
  </section>

  <!-- Sección Recordatorios -->
  <section class="card flex items-center justify-between">
    <div>
      <h3 class="text-sm font-semibold text-gray-700 tracking-wide">Recordatorios diarios</h3>
      <p class="text-[11px] text-gray-500 mt-0.5">Notificación para registrar ingresos o gastos.</p>
    </div>
    <label class="relative inline-flex items-center cursor-pointer select-none">
      <input type="checkbox" class="sr-only peer" [(ngModel)]="notificationsEnabled">
      <div class="w-11 h-6 rounded-full bg-gray-300 peer-checked:bg-blue-600 transition-colors duration-200 after:content-[''] after:absolute after:w-5 after:h-5 after:bg-white after:rounded-full after:top-0.5 after:left-0.5 after:transition-all peer-checked:after:translate-x-5 shadow-sm"></div>
    </label>
    <p class="text-xs text-gray-500">Activa para habilitar recordatorios locales (requiere permiso del navegador).</p>
    <div class="mt-3 grid gap-3" *ngIf="notificationsEnabled()">
      <div class="flex flex-wrap items-end gap-2">
        <div class="flex flex-col">
          <label class="text-[11px] font-semibold tracking-wide text-gray-500">Hora</label>
          <input type="time" [(ngModel)]="reminderTime" class="input w-32" />
        </div>
        <div class="flex-1 min-w-[160px] flex flex-col">
          <label class="text-[11px] font-semibold tracking-wide text-gray-500">Título</label>
          <input [(ngModel)]="reminderTitle" class="input" />
        </div>
        <div class="flex-1 min-w-[200px] flex flex-col">
          <label class="text-[11px] font-semibold tracking-wide text-gray-500">Mensaje</label>
          <input [(ngModel)]="reminderBody" class="input" />
        </div>
        <button type="button" class="btn-primary h-9 mt-5" (click)="scheduleReminder()">Programar</button>
      </div>
      <div class="flex gap-2">
        <button type="button" class="btn-secondary" (click)="testNow()">Probar ahora</button>
        <button type="button" class="btn-secondary" (click)="clearReminders()" *ngIf="activeReminders.length">Limpiar</button>
      </div>
      <ul class="text-xs text-gray-600 space-y-1" *ngIf="activeReminders.length">
        <li *ngFor="let r of activeReminders">⏰ {{ r.hour.toString().padStart(2,'0') }}:{{ r.minute.toString().padStart(2,'0') }} - {{ r.title }}</li>
      </ul>
    </div>
  </section>

  <!-- Mantenimiento -->
  <section class="card space-y-3">
    <h3 class="text-sm font-semibold text-gray-700 tracking-wide">Mantenimiento</h3>
    <div class="grid grid-cols-1 gap-2">
      <button (click)="exportDb()" class="btn btn-outline w-full justify-center">Exportar Base de Datos</button>
      <button (click)="importDb()" class="btn btn-outline w-full justify-center">Importar Base de Datos</button>
    </div>
    <p class="text-[11px] text-gray-400">La importación reemplazará todos los datos actuales.</p>
  </section>
</div>
